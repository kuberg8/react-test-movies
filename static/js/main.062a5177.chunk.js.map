{"version":3,"sources":["components/Card/card.module.scss","components/Card/Card.js","pages/films/Index.js","api/movie.js","pages/films/_id.js","pages/NotFound.js","App.js","reportWebVitals.js","index.js","pages/films/style.module.scss"],"names":["module","exports","Card","img","title","genres","id","rating","to","className","style","card","src","alt","container","join","Films","useState","movies","setMovies","loading","setLoading","useEffect","fetch","then","res","json","data","catch","err","alert","finally","Fragment","films","map","movie","i","medium_cover_image","getMovie","Promise","rej","FilmId","props","film","comments","commentValue","state","setState","match","history","params","all","text","name","document","body","backgroundImage","background_image","replace","background","poster__img","window","innerWidth","large_cover_image","info","title_long","description","description_intro","year","torrents","length","torrent","index","href","url","margin","comment","comment__item","onClick","newComments","filter","item","deleteComment","display","value","onChange","target","Math","floor","random","NotFound","fontSize","App","basename","process","path","render","withRouter","exact","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.062a5177.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"card_card__2l2sh\",\"rating\":\"card_rating__1dMvP\",\"container\":\"card_container__VYbdS\"};","import { NavLink } from \"react-router-dom\";\nimport style from \"./card.module.scss\";\n\nconst defaultImg =\n  \"https://cdn.pixabay.com/photo/2017/01/25/17/35/camera-2008489_1280.png\";\n\nfunction Card({ img, title, genres, id, rating }) {\n  return (\n    <NavLink to={\"film/\" + id} className={style.card}>\n      <img src={img || defaultImg} alt=\"Poster\" />\n      <div className={style.container}>\n        <h4>\n          <b>{title || \"Без названия\"}</b>\n        </h4>\n        <p>\n          <small>{genres?.join(\", \")}</small>\n        </p>\n      </div>\n\n      <div className={style.rating}>{rating}</div>\n    </NavLink>\n  );\n}\n\nexport default Card;\n","import React, { useState, useEffect } from \"react\";\nimport Card from \"../../components/Card/Card\";\nimport style from \"./style.module.scss\";\n\nfunction Films() {\n  const [movies, setMovies] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    fetch(\"https://yts.mx/api/v2/list_movies.json\")\n      .then((res) => res.json())\n      .then(({ data }) => setMovies(data.movies))\n      .catch((err) => alert(err))\n      .finally(() => setLoading(false));\n  }, []);\n\n  if (loading) {\n    return (\n      <img\n        src=\"https://media4.giphy.com/media/wnYB3vx9t6PXiq1ubB/giphy.gif?cid=bd60e2b0b6ibsfgcip82c514vyf0pitf5l3b29026xo20lav&rid=giphy.gif&ct=g\"\n        alt=\"loading\"\n      />\n    );\n  }\n\n  return (\n    <React.Fragment>\n      <h1>Фильмы</h1>\n      <div className={style.films}>\n        {movies.map((movie, i) => (\n          <Card\n            img={movie.medium_cover_image}\n            title={movie.title}\n            genres={movie.genres}\n            key={movie.id}\n            id={movie.id}\n            rating={movie.rating}\n          />\n        ))}\n      </div>\n    </React.Fragment>\n  );\n}\n\nexport default Films;\n","const getMovie = (id) => {\n  return new Promise((res, rej) => {\n    fetch(`https://yts.mx/api/v2/movie_details.json?movie_id=${id}`)\n      .then((res) => res.json())\n      .then(({ data }) => res(data.movie))\n      .catch(() => rej());\n  });\n};\n\nconst getComments = (id) => {\n  return new Promise((res, rej) => {\n    fetch(`https://yts.mx/api/v2/movie_comments.json?movie_id=${id}`)\n      .then((res) => res.json())\n      .then(({ data }) => res(data))\n      .catch(() => rej());\n  });\n};\n\nexport { getMovie, getComments };\n","import React, { useState, useEffect } from \"react\";\nimport style from \"./style.module.scss\";\nimport { getMovie, getComments } from \"../../api/movie\";\n\nfunction FilmId(props) {\n  const [state, setState] = useState({\n    film: {},\n    comments: [],\n    loading: true,\n    commentValue: \"\",\n  });\n\n  useEffect(() => {\n    const { match, history } = props;\n    const id = match.params?.id;\n\n    Promise.all([getMovie(id) /*, getComments(id) */])\n      .then(([movie /*, comments */]) => {\n        setState({\n          ...state,\n          film: movie,\n          comments: [\n            { text: \"Классный!\", name: \"Bob\", id: 1 },\n            { text: \"На один раз\", name: \"John\", id: 2 },\n          ], // comments\n          loading: false,\n        });\n\n        document.body.style.backgroundImage = `url('${movie.background_image}')`;\n      })\n      .catch(() => history.replace(\"/404\"));\n\n    return () => (document.body.style.background = \"\");\n  }, []);\n\n  if (state.loading) {\n    return (\n      <img\n        src=\"https://media4.giphy.com/media/wnYB3vx9t6PXiq1ubB/giphy.gif?cid=bd60e2b0b6ibsfgcip82c514vyf0pitf5l3b29026xo20lav&rid=giphy.gif&ct=g\"\n        alt=\"loading\"\n      />\n    );\n  }\n\n  const addComment = () => {\n    if (state.commentValue) {\n      setState({\n        ...state,\n        comments: [\n          ...state.comments,\n          {\n            name: \"Alex\",\n            text: state.commentValue,\n            id: Math.floor(Math.random() * 1000)\n          },\n        ],\n        commentValue: \"\",\n      });\n    }\n  };\n\n  const deleteComment = (comment) => {\n    const newComments = state.comments.filter((item) => item !== comment);\n    setState({\n      ...state,\n      comments: newComments,\n    });\n  };\n\n  return (\n    <div className={style.container}>\n      <div className={style.film}>\n        <img\n          className={style.poster__img}\n          src={\n            window.innerWidth > 992\n              ? state.film?.large_cover_image\n              : state.film?.medium_cover_image\n          }\n          alt=\"Poster\"\n        />\n        <div className={style.info}>\n          <h1>{state.film?.title_long}</h1>\n          <p className={style.description}>{state.film?.description_intro}</p>\n\n          <h3>О фильме:</h3>\n          <p>\n            <span>Год производства</span>\n            {state.film?.year}\n          </p>\n          <p>\n            <span>Жанр</span>\n            {state.film?.genres?.join(\", \")}\n          </p>\n          <p>\n            <span>Рейтинг</span>\n            {state.film?.rating}\n          </p>\n\n          {state.film?.torrents && state.film?.torrents.length && (\n            <React.Fragment>\n              <h3>Скачать Торрент</h3>\n              <span>\n                {state.film.torrents.map((torrent, index) => (\n                  <a\n                    key={index}\n                    href={torrent.url}\n                    style={{ margin: \"0 10px\" }}\n                  >\n                    <img\n                      src=\"https://img.icons8.com/color/48/000000/utorrent.png\"\n                      alt=\"торрент\"\n                    />\n                  </a>\n                ))}\n              </span>\n            </React.Fragment>\n          )}\n        </div>\n      </div>\n\n      <div className={style.comments}>\n        <h1>Комментарии</h1>\n        {state.comments?.map((comment) => (\n          <div className={style.comment__item} key={comment.id}>\n            <h3>{comment.name}</h3>\n            <p>{comment.text}</p>\n            <button onClick={() => deleteComment(comment)}>X</button>\n          </div>\n        ))}\n        <div style={{ display: \"flex\" }}>\n          <input\n            value={state.commentValue}\n            onChange={({ target }) =>\n              setState({ ...state, commentValue: target.value })\n            }\n          />\n          <button onClick={addComment}>Отправить</button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default FilmId;\n","function NotFound() {\n  return <div style={{ fontSize: \"140px\" }}>404</div>;\n}\n\nexport default NotFound;\n","import React from \"react\";\nimport { BrowserRouter } from \"react-router-dom\";\nimport { Route, Switch } from \"react-router-dom\";\nimport { withRouter } from \"react-router\";\n\nimport Films from \"./pages/films/Index\";\nimport FilmId from \"./pages/films/_id\";\nimport NotFound from \"./pages/NotFound\";\n\nimport \"./assets/styles/main.scss\";\n\nfunction App() {\n  return (\n    <React.Fragment>\n      <BrowserRouter basename={process.env.PUBLIC_URL}>\n        <Switch>\n          <Route path=\"/films\" render={() => <Films />} />\n          <Route path=\"/film/:id\" render={withRouter(FilmId)} />\n          <Route exact path=\"/\" render={() => <Films />} />\n          <Route render={() => <NotFound />} />\n        </Switch>\n      </BrowserRouter>\n    </React.Fragment>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"films\":\"style_films__2ON_f\",\"film\":\"style_film__30FKu\",\"info\":\"style_info__3u2n8\",\"poster__img\":\"style_poster__img__3s7hd\",\"comments\":\"style_comments__2xZ_g\",\"comment__item\":\"style_comment__item__13MVD\",\"container\":\"style_container__2DpAC\"};"],"sourceRoot":""}