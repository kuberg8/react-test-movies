(this.webpackJsonptest=this.webpackJsonptest||[]).push([[0],{12:function(e,t,n){e.exports={card:"card_card__2l2sh",rating:"card_rating__1dMvP",container:"card_container__VYbdS"}},34:function(e,t,n){},35:function(e,t,n){"use strict";n.r(t);var i=n(1),c=n.n(i),r=n(17),s=n.n(r),a=n(9),o=n(2),l=n(7),d=n(12),j=n.n(d),m=n(0);var u=function(e){var t=e.img,n=e.title,i=e.genres,c=e.id,r=e.rating;return Object(m.jsxs)(a.b,{to:"film/"+c,className:j.a.card,children:[Object(m.jsx)("img",{src:t||"https://cdn.pixabay.com/photo/2017/01/25/17/35/camera-2008489_1280.png",alt:"Poster"}),Object(m.jsxs)("div",{className:j.a.container,children:[Object(m.jsx)("h4",{children:Object(m.jsx)("b",{children:n||"\u0411\u0435\u0437 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044f"})}),Object(m.jsx)("p",{children:Object(m.jsx)("small",{children:null===i||void 0===i?void 0:i.join(", ")})})]}),Object(m.jsx)("div",{className:j.a.rating,children:r})]})},b=n(5),h=n.n(b);var f=function(){var e=Object(i.useState)([]),t=Object(l.a)(e,2),n=t[0],r=t[1],s=Object(i.useState)(!0),a=Object(l.a)(s,2),o=a[0],d=a[1];return Object(i.useEffect)((function(){fetch("https://yts.mx/api/v2/list_movies.json").then((function(e){return e.json()})).then((function(e){var t=e.data;return r(t.movies)})).catch((function(e){return alert(e)})).finally((function(){return d(!1)}))}),[]),o?Object(m.jsx)("img",{src:"https://media4.giphy.com/media/wnYB3vx9t6PXiq1ubB/giphy.gif?cid=bd60e2b0b6ibsfgcip82c514vyf0pitf5l3b29026xo20lav&rid=giphy.gif&ct=g",alt:"loading"}):Object(m.jsxs)(c.a.Fragment,{children:[Object(m.jsx)("h1",{children:"\u0424\u0438\u043b\u044c\u043c\u044b"}),Object(m.jsx)("div",{className:h.a.films,children:n.map((function(e,t){return Object(m.jsx)(u,{img:e.medium_cover_image,title:e.title,genres:e.genres,id:e.id,rating:e.rating},e.id)}))})]})},O=n(20),x=n(6),v=function(e){return new Promise((function(t,n){fetch("https://yts.mx/api/v2/movie_details.json?movie_id=".concat(e)).then((function(e){return e.json()})).then((function(e){var n=e.data;return t(n.movie)})).catch((function(){return n()}))}))};var g=function(e){var t,n,r,s,a,o,d,j,u,b,f,g=Object(i.useState)({film:{},comments:[],loading:!0,commentValue:""}),p=Object(l.a)(g,2),_=p[0],y=p[1];return Object(i.useEffect)((function(){var t,n=e.match,i=e.history,c=null===(t=n.params)||void 0===t?void 0:t.id;return Promise.all([v(c)]).then((function(e){var t=Object(l.a)(e,1)[0];y(Object(x.a)(Object(x.a)({},_),{},{film:t,comments:[{text:"\u041a\u043b\u0430\u0441\u0441\u043d\u044b\u0439!",name:"Bob",id:1},{text:"\u041d\u0430 \u043e\u0434\u0438\u043d \u0440\u0430\u0437",name:"John",id:2}],loading:!1})),document.body.style.backgroundImage="url('".concat(t.background_image,"')")})).catch((function(){return i.replace("/404")})),function(){return document.body.style.background=""}}),[]),_.loading?Object(m.jsx)("img",{src:"https://media4.giphy.com/media/wnYB3vx9t6PXiq1ubB/giphy.gif?cid=bd60e2b0b6ibsfgcip82c514vyf0pitf5l3b29026xo20lav&rid=giphy.gif&ct=g",alt:"loading"}):Object(m.jsxs)("div",{className:h.a.container,children:[Object(m.jsxs)("div",{className:h.a.film,children:[Object(m.jsx)("img",{className:h.a.poster__img,src:window.innerWidth>992?null===(t=_.film)||void 0===t?void 0:t.large_cover_image:null===(n=_.film)||void 0===n?void 0:n.medium_cover_image,alt:"Poster"}),Object(m.jsxs)("div",{className:h.a.info,children:[Object(m.jsx)("h1",{children:null===(r=_.film)||void 0===r?void 0:r.title_long}),Object(m.jsx)("p",{className:h.a.description,children:null===(s=_.film)||void 0===s?void 0:s.description_intro}),Object(m.jsx)("h3",{children:"\u041e \u0444\u0438\u043b\u044c\u043c\u0435:"}),Object(m.jsxs)("p",{children:[Object(m.jsx)("span",{children:"\u0413\u043e\u0434 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0441\u0442\u0432\u0430"}),null===(a=_.film)||void 0===a?void 0:a.year]}),Object(m.jsxs)("p",{children:[Object(m.jsx)("span",{children:"\u0416\u0430\u043d\u0440"}),null===(o=_.film)||void 0===o||null===(d=o.genres)||void 0===d?void 0:d.join(", ")]}),Object(m.jsxs)("p",{children:[Object(m.jsx)("span",{children:"\u0420\u0435\u0439\u0442\u0438\u043d\u0433"}),null===(j=_.film)||void 0===j?void 0:j.rating]}),(null===(u=_.film)||void 0===u?void 0:u.torrents)&&(null===(b=_.film)||void 0===b?void 0:b.torrents.length)&&Object(m.jsxs)(c.a.Fragment,{children:[Object(m.jsx)("h3",{children:"\u0421\u043a\u0430\u0447\u0430\u0442\u044c \u0422\u043e\u0440\u0440\u0435\u043d\u0442"}),Object(m.jsx)("span",{children:_.film.torrents.map((function(e,t){return Object(m.jsx)("a",{href:e.url,style:{margin:"0 10px"},children:Object(m.jsx)("img",{src:"https://img.icons8.com/color/48/000000/utorrent.png",alt:"\u0442\u043e\u0440\u0440\u0435\u043d\u0442"})},t)}))})]})]})]}),Object(m.jsxs)("div",{className:h.a.comments,children:[Object(m.jsx)("h1",{children:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438"}),null===(f=_.comments)||void 0===f?void 0:f.map((function(e){return Object(m.jsxs)("div",{className:h.a.comment__item,children:[Object(m.jsx)("h3",{children:e.name}),Object(m.jsx)("p",{children:e.text}),Object(m.jsx)("button",{onClick:function(){return function(e){var t=_.comments.filter((function(t){return t!==e}));y(Object(x.a)(Object(x.a)({},_),{},{comments:t}))}(e)},children:"X"})]},e.id)})),Object(m.jsxs)("div",{style:{display:"flex"},children:[Object(m.jsx)("input",{value:_.commentValue,onChange:function(e){var t=e.target;return y(Object(x.a)(Object(x.a)({},_),{},{commentValue:t.value}))}}),Object(m.jsx)("button",{onClick:function(){_.commentValue&&y(Object(x.a)(Object(x.a)({},_),{},{comments:[].concat(Object(O.a)(_.comments),[{name:"Alex",text:_.commentValue,id:Math.floor(1e3*Math.random())}]),commentValue:""}))},children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"})]})]})]})};var p=function(){return Object(m.jsx)("div",{style:{fontSize:"140px"},children:"404"})};n(34);var _=function(){return Object(m.jsx)(c.a.Fragment,{children:Object(m.jsx)(a.a,{basename:"/react-test-movies",children:Object(m.jsxs)(o.c,{children:[Object(m.jsx)(o.a,{path:"/films",render:function(){return Object(m.jsx)(f,{})}}),Object(m.jsx)(o.a,{path:"/film/:id",render:Object(o.f)(g)}),Object(m.jsx)(o.a,{exact:!0,path:"/",render:function(){return Object(m.jsx)(f,{})}}),Object(m.jsx)(o.a,{render:function(){return Object(m.jsx)(p,{})}})]})})})},y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,36)).then((function(t){var n=t.getCLS,i=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),i(e),c(e),r(e),s(e)}))};s.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(_,{})}),document.getElementById("root")),y()},5:function(e,t,n){e.exports={films:"style_films__2ON_f",film:"style_film__30FKu",info:"style_info__3u2n8",poster__img:"style_poster__img__3s7hd",comments:"style_comments__2xZ_g",comment__item:"style_comment__item__13MVD",container:"style_container__2DpAC"}}},[[35,1,2]]]);
//# sourceMappingURL=main.062a5177.chunk.js.map